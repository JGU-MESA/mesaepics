record(waveform,"$(P)$(R)DevIdent")
{
    field(DESC,"Get device idenfication of scanner")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getDevIdent $(PORT)")
#    field(PINI,"YES")
    field(FTVL,"CHAR")
    field(NELM,"40")
}

record(ai,"$(P)$(R)pos_get")
{
    field(DESC,"Get current position of scanner")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getPos $(PORT)")
    field(SCAN,"2 second")
    field(EGU,"mm")
    field(PREC,"4")
    field(HOPR,"3")
    field(LOPR,"0")
}

record(ai,"$(P)$(R)stoppos_get")
{
    field(DESC,"Get current stopposition of scanner")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getStopPos $(PORT)")
    field(EGU,"mm")
    field(PREC,"4")
    field(HOPR,"3")
    field(LOPR,"0")
}

record(ai,"$(P)$(R)startpos_get")
{
    field(DESC,"Get current startposition of scanner")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getStartPos $(PORT)")
    field(SCAN,".1 second")
    field(EGU,"mm")
    field(PREC,"4")
    field(HOPR,"14000")
    field(LOPR,"1")
}

record(ao,"$(P)$(R)stoppos_set")
{
    field(DESC,"Set absolute endposition of scanner")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto setStopPos $(PORT)")
    field(EGU,"mm")
    field(PREC,"1")
    field(HOPR,"14000")
    field(LOPR,"1")
    field(DRVH,"14000")
    field(DRVL,"1")
    field(FLNK, "$(P)$(R)stoppos_get.PROC")
}

record(mbbo,"$(P)$(R)stopposdiscrete_set")
{
    field(DESC,"Set absolute endposition of scanner")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto setStopPosDiscrete $(PORT)")
    field(ZRST, "nullposition")
    field(ONST, "schirm1")
    field(TWST, "schirm2h")
    field(THST, "schirm2v")
    field(FRST, "scanbegin")
    field(FVST, "scanend")
    field(FLNK, "$(P)$(R)stoppos_get.PROC")
}

record(ao,"$(P)$(R)startpos_set")
{
    field(DESC,"Set absolute startposition of scanner")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto setStartPos $(PORT)")
    field(EGU,"mm")
    field(PREC,"1")
    field(HOPR,"3")
    field(LOPR,"0")
    field(FLNK, "$(P)$(R)startpos_get.PROC")
}

record(bo,"$(P)$(R)start")
{
    field(DESC,"Start moving of scanner")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto start $(PORT)")
#    field(HIGH,"1")
}

record(ai, "$(P)$(R)run_get")
{
    field(DESC,"Is scanner moving?")
    field(DTYP, "stream")
    field(INP,"@scanner.proto running $(PORT)")
    field(SCAN,"2 second")
}

record(bo, "$(P)$(R)scan_set")
{
    field(DESC,"Set scanmode")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto scanmode $(PORT)")
    field(FLNK, "$(P)$(R)mode_get.PROC")
}

record(bo, "$(P)$(R)single_set")
{
    field(DESC,"Set singlemode")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto singlemode $(PORT)")
    field(FLNK, "$(P)$(R)mode_get.PROC")
}

record(stringin, "$(P)$(R)mode_get")
{
    field(DESC, "Get current mode")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getMode $(PORT)")
}

record(ao,"$(P)$(R)repeat_set")
{
    field(DESC,"Set number of repeats for scanmode")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto setRepeat $(PORT)")
    field(PREC,"0")
    field(HOPR,"3")
    field(LOPR,"0")
    field(FLNK,"$(P)$(R)repeat_get.PROC")
}

record(ai,"$(P)$(R)repeat_get")
{
    field(DESC,"Get number of completed scans")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getRepeat $(PORT)")
    field(PREC,"0")
    field(HOPR,"3")
    field(LOPR,"0")
}

record(ao, "$(P)$(R)minvel_set")
{
    field(DESC,"Set minimum velocity")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto setMinVel $(PORT)")
    field(PREC,"2")
    field(HOPR,"3")
    field(LOPR,"0")
}

record(ai, "$(P)$(R)minvel_get")
{
    field(DESC,"Get minimum velocity")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getMinVel $(PORT)")
    field(PREC,"2")
}

record(ao, "$(P)$(R)maxvel_set")
{
    field(DESC,"Set maximum velocity")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto setMaxVel $(PORT)")
    field(PREC,"2")
    field(HOPR,"3")
    field(LOPR,"0")
}

record(ai, "$(P)$(R)maxvel_get")
{
    field(DESC,"Get maximum velocity")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getMaxVel $(PORT)")
    field(PREC,"2")
}

record(ai, "$(P)$(R)acc_get")
{
    field(DESC,"Get current acceleration")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getAcc $(PORT)")
    field(PREC,"2")
}

record(ao, "$(P)$(R)pmg_set")
{
    field(DESC,"Set gain of photomultiplier input")
    field(DTYP,"stream")
    field(OUT,"@scanner.proto setPMGain $(PORT)")
}

record(ai, "$(P)$(R)pmg_get")
{
    field(DESC,"Get gain of photomultiplier input")
    field(DTYP,"stream")
    field(INP,"@scanner.proto getPMGain $(PORT)")
}



########### Schirm- und Scanpositionen für melba_050:scan ################
# 
#record(ao, "melba_050:scan:nullposition")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba050scan_nullposition $(PORT)")
#     field(DRVH, "64")
#     field(DRVL, "62")
#     field(VAL, "63")
#}
#
#record(ao, "melba_050:scan:schirm1")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba050scan_schirm1 $(PORT)")
#     field(DRVH, "64")
#     field(DRVL, "62")
#     field(VAL, "63")
#}

#record(ao, "melba_050:scan:schirm2h")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba050scan_schirm2h $(PORT)")
#}
#
#record(ao, "melba_050:scan:schirm2v")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba050scan_schirm2v $(PORT)")
#}
#
#record(ao, "melba_050:scan:scanbegin")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba050scan_scanbegin $(PORT)")
#}
#
#record(ao, "melba_050:scan:scanend")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba050scan_scanend $(PORT)")
#}
#
########### Schirm- und Scanpositionen für melba_020:scan #################
#
#record(ao, "melba_020:scan:nullposition")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba020scan_nullposition $(PORT)")
#     field(DRVH, "65.8")
#     field(DRVL, "63.8")
#     field(VAL, "64.8")
#}
#
#record(ao, "melba_020:scan:schirm1")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba020scan_schirm1 $(PORT)")
#}
#
#record(ao, "melba_020:scan:schirm2h")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba020scan_schirm2h $(PORT)")
#}
#
#record(ao, "melba_020:scan:schirm2v")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba020scan_schirm2v $(PORT)")
#}
#
#record(ao, "melba_020:scan:scanbegin")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba020scan_scanbegin $(PORT)")
#}
#
#record(ao, "melba_020:scan:scanend")
#{
#     field(DTYP,"stream")
#     field(OUT,"@scanner.proto melba020scan_scanend $(PORT)")
#}

