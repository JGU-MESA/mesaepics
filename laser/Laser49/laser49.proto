Terminator = CR LF;
replytimeout = 1000;
Extrainput = ignore;

debug{
    out "%s";
    in "%39c";
}

on_get{
    out "state?";
    in  "power %{off|on}";
    in  "-----";
    @init{
        out "state?";
        in  "power %{off|on}";
        in  "-----";
    }
}

on_set{
    out "%{off|on}";
    in  "power %{off|on}";
    in  "-----";
    @init{ on_get;}
}

#===== Pulse Length =====
pl_get{
    out "p?";
    in  "Pulse length is set to:";
    in  "%u microseconds";
    in  "-----";
    @init{
        out "p?";
        in  "Pulse length is set to:";
        in  "%u microseconds";
        in  "-----";
    }
}

pl_set{
    out "%u";
    in  "Requested value = %u";
    in  "-----";
    out "p";
    in  "Pulse length is set to:";
    in  "%u microseconds";
    in  "-----";
    @init{ pl_get; }
}

#===== Amplitude =====
a_get{
    out "a?";
    in  "Amplitude is set to:";
    in  "%u";
    in  "-----";
    @init{
        out "a?";
        in  "Amplitude is set to:";
        in  "%u";
        in  "-----";
    }
}

a_set{
    out "%u";
    in  "Requested value = %u";
    in  "-----";
    out "a";
    in  "Amplitude is set to:";
    in  "%u";
    in  "-----";
    @init{ a_get; }
}

#===== Number of shots =====
nos_get{
    out "n?";
    in  "Number of shots is set to:";
    in  "%u";
    in  "-----";
    @init{
        out "n?";
        in  "Number of shots is set to:";
        in  "%u";
        in  "-----";
}

nos_set{
    out "%u";
    in  "Requested value = %u";
    in  "-----";
    out "n";
    in  "Number of shots is set to:";
    in  "%u";
    in  "-----";
    @init{ nos_get;}
}

#===== Cycle time = time span between two shots =====
dt_get{
    out "t?";
    in  "Cycle time is set to:";
    in  "%u microseconds";
    in  "-----";
    @init{
        out "t?";
        in  "Cycle time is set to:";
        in  "%u microseconds";
        in  "-----";
    }
}

dt_set{
    out "%u";
    in  "Requested value = %u";
    in  "-----";
    out "t";
    in  "Cycle time is set to:";
    in  "%u microseconds";
    in  "-----";
    @init{ dt_get; }
}
#===== Handshake =====
handshake_get{
    out "x?";
    in  "Set-delay is set to:";
    in  "%u microseconds";
    in  "-----";
    @init{
        out "x?";
        in  "Set-delay is set to:";
        in  "%u microseconds";
        in  "-----";
    }
}

handshake_set{
    out "%u";
    in  "Requested value = %u";
    in  "-----";
    out "x";
    in  "Set-delay is set to:";
    in  "%u microseconds";
    in  "-----";
    @init{ handshake_get;}
}

#===== DC mode =====
dc_set{
    out "dc %{off|on}";
    in  "Set request for dc %{off|on}";
    in  "-----";
}
